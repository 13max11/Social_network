{% extends 'base.html' %}

{% block title %}{{post.title}}{% endblock %}


{% block content %}
    {% if not post.deleted %}
        <div class="post">
            <div class="post-head">
                <h1>{{post.title}}</h1>
                <p>{{post.created_by}}</p>
                <p>{{post.created_at}}</p>
            </div>
            <div class="post-body">
                <p>{{post.content|safe}}</p>
                {% if post.image %}
                    <img src="{{post.image.url}}" alt="post img" width="200px">
                {% endif %}
            </div>
        </div>
        
        <form action="{% url 'post' post.community.slug post.pk %}" method="post">
            <button type="submit" name="like">
                {% csrf_token %}
                {{reputation}}
                подобаться
            </button>
        </form>

        <form action="{% url 'post' post.community.slug post.pk %}" method="post">
            <button type="submit" name="dislike">
                {% csrf_token %}
                неподобається
            </button>
        </form>
        
        <div class="comments">
            {% if user.is_authenticated %}
                <form action="{% url 'post' post.community.slug post.pk %}" method="post" class="comment-form">
                    {% csrf_token %}
                    <input type="text" name="content" placeholder="Ваш коментар..." required>
                    <button type="submit" name="comment">Додати коментар</button>
                </form>
            {% else %}
                <p>Будь ласка, <a href="{% url 'login' %}">увійдіть</a>, щоб залишити коментар.</p>
            {% endif %}
        
            <h3>Коментарі:</h3>
            {% for comment in comments %}
                <div class="comment" id="{{comment.pk}}">
                    <p><strong>{{ comment.user.username }}</strong>:</p>
                    <p>{{ comment.content }}</p>
                    <p class="date">{{ comment.created_at|date:"d/m/Y H:i" }}</p>
                </div>
            {% empty %}
                <p>Немає коментарів. Будьте першим!</p>
            {% endfor %}
        </div>
    {% else %}

        <h1>це видалений пост</h1>

    {% endif %}

{% endblock %}
